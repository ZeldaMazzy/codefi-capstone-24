<mat-card layout='row' class="info" style="margin-top:4.6rem;">
  <mat-card-title-group>
      <mat-card-title class="avatar-title">Hello, {{user?.firstName}}</mat-card-title>
  </mat-card-title-group>
  <mat-card-content class="quick-info">You are signed in as: <br> {{user?.firstName}} {{user?.lastName}}
      <mat-divider class="divider" vertical="true" vertical style="height:60px"></mat-divider>
  </mat-card-content>
  <mat-card-content class="quick-info">Your account number: <br> {{user.accountNumber}}
      <mat-divider class="divider" vertical="true" vertical style="height:60px"></mat-divider>
  </mat-card-content>
  <mat-divider class="block-divider"></mat-divider>
  <mat-card class="transaction-box">
      <mat-card-header>
          <div mat-card-avatar class="grid-card-header-image">
              <mat-icon class="icon">swap_horiz</mat-icon>
          </div>
          <mat-card-title>Recent Transactions</mat-card-title>
          <mat-card-subtitle>account number: {{13690000 + user.accountNumber}}</mat-card-subtitle>
          <mat-menu #appMenu1="matMenu">
              <button mat-menu-item>Settings</button>
              <button mat-menu-item routerLink="/help">Help</button>
          </mat-menu>
          <button mat-icon-button class="gear-transactions" [matMenuTriggerFor]="appMenu1">
      <mat-icon class="menu-dots">settings</mat-icon>
    </button>
      </mat-card-header>
      <div *ngIf="hasTransactions" class="mat-elevation-z8 list">
          <table mat-table [dataSource]="dataSource" multiTemplateDataRows class="mat-elevation-z8">

              <ng-container matColumnDef="description">
                  <th mat-header-cell class="sticky-header" *matHeaderCellDef> Description </th>
                  <td mat-cell *matCellDef="let element"> <span class="elipsis">{{element.description}}</span> </td>
              </ng-container>

              <ng-container matColumnDef="amount">
                  <th mat-header-cell class="sticky-header" *matHeaderCellDef> Amount </th>
                  <td mat-cell *matCellDef="let element"> <span class="elipsis">{{element.amount}}</span> </td>
              </ng-container>

              <ng-container matColumnDef="senderAccountNumber">
                  <th mat-header-cell class="sticky-header" *matHeaderCellDef> Account </th>
                  <td mat-cell *matCellDef="let element"> <span class="elipsis">{{"200-" + element.senderAccountNumber}}</span>
                  </td>
              </ng-container>

              <ng-container matColumnDef="date">
                  <th mat-header-cell class="sticky-header" *matHeaderCellDef> Date </th>
                  <td mat-cell *matCellDef="let element"> <span class="elipsis">{{element.date}}</span> </td>
              </ng-container>

              <ng-container matColumnDef="expandedDetail">
                  <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplayEng.length">
                      <div class="transaction-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                          <div class="transaction-element-description">
                              Description: {{element.description}} <br> Payment method: {{element.paymentMethod}} <br> Receiver account: {{"200-"+element.receiverAccountNumber}} <br> Date recorded : {{element.dateKnjizenja}}
                          </div>
                      </div>
                  </td>
              </ng-container>

              <tr class="header-row" mat-header-row *matHeaderRowDef="columnsToDisplayEng; sticky: true"></tr>
              <tr mat-row *matRowDef="let element; columns: columnsToDisplayEng;" class="transaction-element-row" [class.transaction-expanded-row]="expandedElement === element" (click)="expandedElement = expandedElement === element ? null : element">
              </tr>
              <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="transaction-detail-row"></tr>
          </table>
      </div>
      <div *ngIf="isLoading" class="mat-elevation-z8 list">
      </div>
      <div *ngIf="!hasTransactions && !isLoading" class="mat-elevation-z8 list no-overflow">
          <p class="no-transactions-message">You have no transactions.</p>
      </div>
  </mat-card>
  <mat-card class="current-balance-box">
      <mat-card-header *ngIf="!isLoading">
          <div mat-card-avatar class="grid-card-header-image">
              <mat-icon class="icon">monetization_on</mat-icon>
          </div>
          <mat-card-title>Available balance</mat-card-title>
          <mat-card-subtitle>account number: {{13690000 + user.accountNumber}}</mat-card-subtitle>
          <mat-menu #appMenu2="matMenu">
              <button mat-menu-item>Settings</button>
              <button mat-menu-item routerLink="/help">Help</button>
          </mat-menu>
          <button mat-icon-button [matMenuTriggerFor]="appMenu2" style="left:7.5rem">
      <mat-icon class="menu-dots" >settings</mat-icon>
    </button>
      </mat-card-header>
      <mat-card-content *ngIf=isLoading>

          <div *ngIf="isLoading">
              <mat-spinner class="spinner" style='left: 10rem; top: 0rem;'></mat-spinner>
          </div>

      </mat-card-content>
      <mat-card-content *ngIf=!isLoading>
          <p class="current-balance">
              {{user.balance}}<span class="currency">,00 USD</span>
          </p>
          <p class="limit-bar-text">Used limit: {{user.usedLimit}}/{{user.limitMonthly}} RSD</p>
          <mat-progress-bar class="limit-bar" mode="determinate" value="{{100*(user.usedLimit / user.limitMonthly)}}">
          </mat-progress-bar>
      </mat-card-content>
